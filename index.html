<html>
	<head>
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen">
    <script>
      window.onload = function(){
        // ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
        // We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser

        var inbox_count = document.createElement('h2');
        var number = document.createTextNode('Inbox (' + window.geemails.length + ')');
        document.body.appendChild(inbox_count);
        inbox_count.appendChild(number);


        var table = document.querySelector('tbody');
        var items = ["sender", "subject", "date"]
        var header = document.querySelector('#header');

        for (let i = 0; i < 10; i++) {
        	var email = document.createElement('tr');
        	for (var j = 0; j < 3; j++) {
        		var cell = email.insertCell(0);
        		cell.innerHTML = window.geemails[i][items[j]];
        	}  

        	table.appendChild(email);
        	email.onclick = function() {
        		var emailbody = document.querySelector('#emailbody');
        		emailbody.innerHTML = `<p class="email">${window.geemails[i].body}</p>`;
        	}
        }
        function getEmails() {
        	var newMessage = window.getNewMessage();
        	var newEmail = document.createElement('tr');
        	var newCell = newEmail.insertCell(0);
        	newCell.innerHTML = newMessage;
        	table.appendChild(newEmail);
        }

					setInterval(getEmails, 100);
        
      };
    </script>
	</head>
	<body>
		<div class="container" id="main">
			<div id="header"><h1>âœ± Geemail</h1></div>
			<div id="emailbody" align="center"><span></span></div>
			<table id="inbox" align="center">
				<thead>
				<tr>
					<th>Date</th>
					<th>Subject</th>
					<th>Sender</th>
				</tr>
				</thead>
				<tbody></tbody>
			</table>
		</div>
	</body>
</html>